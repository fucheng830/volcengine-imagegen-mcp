# 🧪 火山引擎 AI 生图 MCP 工具 - 测试计划

## 📋 测试概述

本文档提供了详细的测试计划，用于验证火山引擎 AI 生图 MCP 工具的所有功能。

---

## 🎯 测试目标

### 主要目标

1. ✅ **功能完整性验证**: 确认所有 4 个 MCP 工具都能正常工作
2. ✅ **参数验证**: 验证所有参数（model, prompt, size 等）都能正确处理
3. ✅ **格式支持**: 验证 URL 和 Base64 两种输出格式都正常
4. ✅ **错误处理**: 确认所有错误情况都能被正确识别和处理
5. ✅ **性能基准**: 收集各功能的响应时间数据

---

## 📊 测试范围

| 测试类别 | 测试数量 | 预计时间 |
|-----------|---------|---------|
| 基本文生图功能测试 | 4 个 | 30 分钟 |
| 完整参数测试 | 3 个 | 45 分钟 |
| 输出格式测试 | 2 个 | 15 分钟 |
| 图生图功能测试 | 1 个 | 20 分钟 |
| 组图生成测试 | 1 个 | 25 分钟 |
| 模型列表查询测试 | 1 个 | 5 分钟 |
| 错误处理测试 | 3 个 | 20 分钟 |
| **总计** | **14 个测试** | **2 小时** |

---

## ✅ 详细测试计划

### 测试组 1: 基本文生图功能 (TC001-TC004)

#### TC001: 柺本文生图 - 简单测试

**测试名称**: TC001_简单文生图

**测试目的**: 验证基本的文生图功能是否正常工作

**测试步骤**:
1. 在 Claude Desktop 中配置 MCP Server
2. 等待服务器启动（约 10 秒）
3. 在 Claude 中输入以下提示词：
   ```
   生成一张简单的风景画，描绘宁静的湖泊和远山
   ```
4. 观察返回结果
5. 验证：
   - [ ] 是否成功生成图片
   - [ ] 是否返回图片下载链接
   - [ ] 是否显示成功消息
   - [ ] 响应时间是否合理（< 60 秒）

**预期结果**:
- 成功生成 1 张 2K 分辨率的山水风景画
- 返回有效的图片下载链接
- 响应时间：30-60 秒

**成功标准**:
- ✅ 成功消息："✅ 成功生成 X 张图片！"
- ✅ 包含模型、提示词、尺寸信息
- ✅ 提供图片下载链接
- ✅ 响应时间 < 60 秒

**失败标准**:
- ❌ 显示错误消息
- ❌ API Key 相关错误
- ❌ 响应时间 > 120 秒

---

#### TC002: 基本文生图 - 完整参数测试

**测试名称**: TC002_完整参数文生图

**测试目的**: 验证所有参数是否正常工作

**测试步骤**:
1. 在 Claude 中输入：
   ```
   生成一张专业摄影师拍摄的商业肖像，自然光，眼神自信，背景简洁，8K分辨率，文本权重 7.5，添加水印
   ```
2. 验证所有参数是否正确传递和处理

**验证清单**:
- [ ] model: doubao-seedream-4.5
- [ ] size: 4K
- [ ] guidance_scale: 7.5
- [ ] watermark: true
- [ ] count: 1

**预期结果**:
- 成功生成 1 张 4K 分辨率的商业肖像
- 返回带水印的图片
- 文本权重为 7.5（较高，严格遵循提示词）

**成功标准**:
- ✅ 所有参数都被正确传递
- ✅ 水印功能正常工作
- ✅ 高质量输出
- ✅ 响应时间 < 90 秒

---

#### TC003: 基本文生图 - Base64 格式测试

**测试名称**: TC003_Base64格式文生图

**测试目的**: 验证 Base64 输出格式是否正常工作

**测试步骤**:
1. 在 Claude 中输入：
   ```
   生成一张简约风格的企业 Logo，以 Base64 格式返回，方便直接嵌入 HTML
   ```
2. 选择 response_format: "b64_json"

**预期结果**:
- 成功生成 1 张 Base64 编码的 Logo 图片
- 图片可以在 Claude 中直接预览（无需下载）
- 可以直接复制 Base64 数据

**成功标准**:
- ✅ Base64 格式正常工作
- ✅ 图片可以在 Claude 中直接显示
- ✅ 响应时间 < 60 秒
- ✅ 无需额外的下载步骤

---

#### TC004: 批量生成测试

**测试名称**: TC004_多张文生图

**测试目的**: 验证批量生成 3-4 张图片的功能

**测试步骤**:
1. 在 Claude 中输入：
   ```
   生成 3 张不同风格的城市夜景，包括霓虹灯、高楼、赛博朋克风格
   ```
2. 设置 count: 3, size: 2K

**预期结果**:
- 成功生成 3 张 2K 分辨率的城市夜景
- 每张图片风格不同
- 响应包含 3 个图片链接

**成功标准**:
- ✅ 批量生成功能正常
- ✅ 正确生成指定数量的图片
- ✅ 所有图片链接都有效
- ✅ 响应时间 < 90 秒

---

### 测试组 2: 图生图功能测试 (TC005)

#### TC005: 图生图 - 单图测试

**测试名称**: TC005_图生图单张

**测试目的**: 验证图生图功能是否正常工作

**前提条件**: 需要先有一张参考图片（可以是网络图片）

**测试步骤**:
1. 准备参考图片：上传一张图片到网盘获取 URL
2. 在 Claude 中输入：
   ```
   根据这张图片的风格，生成一张新的商务肖像，背景简洁专业
   ```
3. Claude 会询问参考图片 URL
4. 提供参考图片 URL

**预期结果**:
- 成功调用图生图功能
- 基于参考图生成新图片
- 保持原图的商务风格

**成功标准**:
- ✅ 图生图工具正常工作
- ✅ 正确处理参考图片 URL
- ✅ 生成新图片
- ✅ 响应时间 < 90 秒

**注意**: 
- 图生图功能仅支持 doubao-seedream-4.5 和 4.0
- 需要有效的参考图片 URL

---

### 测试组 3: 组图生成功能测试 (TC006)

#### TC006: 组图生成 - 小批量测试

**测试名称**: TC006_小批量组图生成

**测试目的**: 验证组图生成 4-6 张的功能

**测试步骤**:
1. 在 Claude 中输入：
   ```
   生成一组 4 张科幻风格的太空探索主题插画
   ```
2. 设置 count: 4

**预期结果**:
- 成功生成 4 张内容关联的科幻插画
- 响应包含 4 个图片链接
- 图片内容连贯性良好

**成功标准**:
- ✅ 组图生成功能正常
- ✅ 正确生成指定数量
- ✅ 内容连贯性良好
- ✅ 响应时间 < 120 秒

---

### 测试组 4: 模型列表查询测试 (TC007)

#### TC007: 模型列表查询

**测试名称**: TC007_模型列表查询

**测试目的**: 验证模型列表查询功能是否正常工作

**测试步骤**:
1. 在 Claude 中输入：
   ```
   列出所有支持的模型和它们的功能
   ```

**预期结果**:
- 成功调用 list_models 工具
- 返回所有 4 个支持的模型信息
- 包含每个模型的功能说明
- 显示支持的尺寸列表

**成功标准**:
- ✅ 模型列表功能正常
- ✅ 显示所有模型（doubao-seedream-4.5/4.0/3.0-t2i/i2i）
- ✅ 包含每个模型的功能描述
- ✅ 显示支持的尺寸

---

### 测试组 5: 错误处理测试 (TC008-TC010)

#### TC008: API Key 未设置测试

**测试名称**: TC008_APIKey未设置

**测试目的**: 验证未设置 API Key 时的错误处理

**测试步骤**:
1. 确保环境变量 ARK_API_KEY 未设置
2. 在 Claude 中输入测试提示词
3. 观察错误消息

**预期结果**:
- 显示错误："❌ 错误：未设置 ARK_API_KEY 环境变量。请设置火山引擎 API Key。"
- 错误信息清晰
- 提示用户如何设置 API Key

**成功标准**:
- ✅ 错误处理机制正常
- ✅ 错误消息友好清晰
- ✅ 提供解决建议

---

#### TC009: 无效模型测试

**测试名称**: TC009_无效模型

**测试目的**: 验证使用无效模型 ID 时的错误处理

**测试步骤**:
1. 在 Claude 中输入：
   ```
   使用模型 model-xyz-xyz 生成一张风景画
   ```

**预期结果**:
- 显示错误："❌ 错误：不支持的模型 "model-xyz-xyz"。支持的模型：..."
- 提供所有支持的模型列表
- 错误信息准确

**成功标准**:
- ✅ 无效模型识别正确
- ✅ 提供可用模型列表
- ✅ 错误信息清晰
- ✅ 建议使用有效模型

---

#### TC010: 无效尺寸测试

**测试名称**: TC010_无效尺寸

**测试目的**: 验证使用无效尺寸时的错误处理

**测试步骤**:
1. 在 Claude 中输入：
   ```
   使用尺寸 size-1K 生成一张风景画
   ```

**预期结果**:
- 显示错误："❌ 错误：不支持的尺寸 "size-1K"。支持的尺寸：2K, 4K, 1024x1024, 2048x2048"
- 提供所有支持的尺寸列表
- 错误信息准确

**成功标准**:
- ✅ 无效尺寸识别正确
- ✅ 提供可用尺寸列表
- ✅ 错误信息清晰
- ✅ 建议使用有效尺寸

---

## 📋 测试执行流程

### 前期准备

1. ✅ **环境配置**
   - [ ] 已设置 ARK_API_KEY 环境变量
   - [ ] 已获取火山引擎 API Key
   - [ ] 已在 Claude Desktop 中配置 MCP Server
   - [ ] 已在 VS Code 中配置 MCP Server（如果使用）

2. ✅ **项目构建**
   - [ ] 已运行 `npm install`
   - [ ] 已运行 `npm run build`
   - [ ] 已生成 `dist/index.js` 文件
   - [ ] 已确认项目编译成功

3. ✅ **文档阅读**
   - [ ] 已阅读 README.md
   - [ ] 已阅读 QUICKSTART.md
   - [ ] 已了解可用的 MCP 工具

### 测试执行

1. 打开 Claude Desktop 或 VS Code
2. 配置 MCP Server
3. 等待服务器启动
4. 按照测试计划逐个执行测试
5. 记录每个测试的结果
6. 收集问题和反馈

---

## 📊 测试记录模板

### 单个测试记录

```
测试编号: TC001
测试名称: 简单文生图
测试时间: 2026-01-20 14:30
测试人: Your Name
测试环境: Claude Desktop
配置: Name=火山引擎生图, Command=npx volcengine-imagegen-mcp, ARK_API_KEY=xxx

测试输入:
  提示词: 生成一张简单的风景画，描绘宁静的湖泊和远山

测试结果:
  状态: ✅ 通过
  成功: 是
  响应时间: 25 秒
  图片数量: 1 张
  图片链接: https://ark-cn-beijing.volces.com/images/xxx.jpg
  备注: 功能正常，符合预期

问题:
  无

改进建议:
  无
```

---

## 📝 测试报告模板

### 测试总结报告

```markdown
# 火山引擎 AI 生图 MCP 工具 - 测试总结报告

**测试日期**: 2026-01-20
**测试人**: Your Name
**测试环境**: Claude Desktop / VS Code

## 📊 测试统计

| 测试类别 | 测试总数 | 通过数 | 失败数 | 通过率 |
|-----------|---------|-------|-------|
| 基本文生图功能 | 4 | 4 | 0 | 100% |
| 完整参数测试 | 3 | 3 | 0 | 100% |
| 输出格式测试 | 2 | 2 | 0 | 100% |
| 图生图功能测试 | 1 | 1 | 0 | 100% |
| 组图生成测试 | 1 | 1 | 0 | 100% |
| 模型列表查询测试 | 1 | 1 | 0 | 100% |
| 错误处理测试 | 3 | 3 | 0 | 100% |
| **总计** | **14** | **14** | **0** | **100%** |

## 📋 测试结果详情

### ✅ 通过测试 (14 个)

| 测试编号 | 测试名称 | 测试环境 |
|-----------|----------|----------|
| TC001 | 简单文生图 | Claude Desktop |
| TC002 | 完整参数文生图 | Claude Desktop |
| TC003 | Base64 格式文生图 | Claude Desktop |
| TC004 | 多张文生图 | Claude Desktop |
| TC005 | 图生图单张 | Claude Desktop |
| TC006 | 小批量组图 | Claude Desktop |
| TC007 | 模型列表查询 | Claude Desktop |
| TC008 | API Key 未设置 | Claude Desktop |
| TC009 | 无效模型 | Claude Desktop |
| TC010 | 无效尺寸 | Claude Desktop |

### ⚠️ 需要改进的问题 (0 个)

无

## 🎉 结论

**测试状态**: ✅ 所有测试都通过

**功能评估**:
- ✅ 基本文生图功能：完整且稳定
- ✅ 完整参数处理：所有参数都能正确传递
- ✅ 输出格式支持：URL 和 Base64 格式都正常
- ✅ 错误处理：完善的错误识别和处理
- ✅ 图生图功能：需要参考图片时正常工作
- ✅ 组图生成功能：批量生成正常
- ✅ 模型列表查询：完整且准确

**性能评估**:
- ✅ 平均响应时间：35 秒（符合预期）
- ✅ 最快响应：15 秒
- ✅ 最慢响应：90 秒（组图生成）
- ✅ 所有功能都响应及时

**文档完整性**:
- ✅ 所有文档齐全清晰
- ✅ 测试计划完整详细
- ✅ 测试记录模板完善
- ✅ 提供了丰富的使用示例

**建议**:
1. 项目可以正式发布使用
2. 建议增加自动化测试脚本
3. 建议持续监控 API 性能

**测试完成日期**: 2026-01-20
**测试负责人**: Your Name
```

---

## 🚀 下一步行动

1. ✅ **正式测试**: 按照本测试计划执行所有测试
2. 📝 **记录结果**: 使用测试记录模板记录每个测试的结果
3. 🔧 **问题反馈**: 发现问题及时反馈
4. 📊 **生成报告**: 完成所有测试后生成测试总结报告
5. 🎉 **发布**: 测试通过后可以考虑发布项目

---

## 📞 测试支持

如果在测试过程中遇到问题：

1. 查看本文档中的"测试范围"和"成功标准"
2. 查看 EXAMPLES.md 中的使用示例
3. 检查 API Key 是否正确配置
4. 查看网络连接是否正常
5. 参考 CLAUDE_GUIDE.md 或 VS_CODE_GUIDE.md 获取使用帮助

---

**测试准备就绪！可以开始执行测试计划了。** 🎉
